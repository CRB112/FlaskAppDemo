<!doctype html>
<html lang="en" data-bs-theme="dark">
    <head>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet">
        <script>
            function redirect(page) {
                window.location.href = page;
            }
        </script>
    </head>
    <body class="col d-flex justify-content-center align-items-center align-content-center flex-column" style="height: 100vh">
        <div class="row">
            <h1>Schedule For {{ constData[0][1] }}</h1>
        </div>
        <div class="row">
            <form method="GET" action="/schedule">
                <input type="hidden" name="studentID" value="{{ request.args.get('studentID') }}">
                <label for="yearFilter" class="col-form-label">Filter by Year:</label>
                <select id="yearFilter" name="selectYear" class="form-select" onchange="this.form.submit()">
                    <option hidden value="">Filter</option>
                    <option value="" {% if request.args.get('selectYear') == '' %}selected{% endif %}>None</option>
                    {% for year in availableYears %}
                        <option value="{{ year }}" {% if year == request.args.get('year')|int %}selected{% endif %}>{{ year }}</option>
                    {% endfor %}
                </select>
            </form>
        </div>
        <div class="row" style="max-height: 400px; overflow-y:auto">
            <table class="table table-striped">
                <thead style="position: sticky; top:0">
                    <tr>
                        <th>ID</th>
                        <th>Name</th>
                        <th>Course-ID</th>
                        <th>Semester</th>
                        <th>Year</th>
                    </tr>
                </thead>
                <tbody class="table-group-divider">
                    {% for row in data %}
                    <tr>
                        <td>{{ constData[0][0] }}</td>
                        <td>{{ constData[0][1] }}</td>
                        <td>{{ row[0] }}</td>
                        <td>{{ row[1] }}</td>
                        <td>{{ row[2] }}</td>        
                    </tr>
                {% endfor %}
                </tbody>
            </table>
        </div>

        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js"></script>
    </body>
</html>